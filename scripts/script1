import numpy as np
from scipy.linalg import svd

imageName = "../../AA_P2/src/main/java/CAS.pgm" #replace the file path
pgmFile = open(imageName, 'r')
headerName = imageName + "_header.txt"
svdName = imageName + "_SVD.txt"


def readfile(filename):
    filename.readline()
    (width, height) = [int(i) for i in filename.readline().split()]
    maxvalue = int(filename.readline())
    headerfile = open(headerName, 'w')
    headerfile.write(str(width) + " " + str(height) + "\n")
    headerfile.write(str(maxvalue))
    headerfile.close()
    # source --  https://codereview.stackexchange.com/questions/12443/reading-ints-line-from-a-file-in-python/12449
    contents = [int(x) for x in filename.read().split()]
    i = 0
    rows = []
    for x in range(height):
        row = []
        for y in range(width):
            row.append(contents[i])
            i = i + 1
        rows.append(row)
    return rows


matrix = np.asarray(readfile(pgmFile))

U, s, VT = svd(matrix)

print(U.shape, s.shape, VT.shape)

